simci.controller("CatalogoController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,a,r,e,i,t,n,s,l,u,c,m){o.modulo={},o.DatosForm={},o.modulo.nombre="Catalogo",o.modulo.icono={tipo:"book",color:"orange"},o.modulo.opciones=[{nombre:"registrar objeto",descripcion:"Esta opcion le permitira a単adir nuevos objetos al catalogo",url:"#/catalogo/registrar-objeto",icono:"save"},{nombre:"ver catalogo",descripcion:"Esta opcion le permitira ver, modificar o eliminar los objetos del catalogos",url:"#/catalogo/ver/todos",icono:"eye"},{nombre:"registrar unidad",descripcion:"Esta opcion le permitira a単adir nuevas unidades para objetos del catalogo",url:"#/catalogo/registrar-unidad",icono:"save"},{nombre:"registrar clase",descripcion:"Esta opcion le permitira a単adir nuevas clases para objetos del objetos",url:"#/catalogo/registrar-clase",icono:"save"}],r.info(t),r.info(n),"/catalogo/registrar-objeto"==n.$$url&&(c.reload_template_cache(i,m),o.mostrar_mensaje=!1,o.mostrar_mensaje_modificacion=!1,o.registrar_objeto=function(){var r=$("#formulario_crear_objeto"),i=r.form(reglas_formulario_crear_objeto).form("is valid");i&&(c.loading_button("btn-registrar",!0),a({method:"POST",url:"/api/catalogo/registrar-objeto",data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Objeto creado con exito",icono:"checkmark",color:"green",mensajes:["El Objeto ha sido agregado al catalogo."]},e(function(){c.loading_button("btn-registrar",!1),r.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:a.data.mensajes}),c.loading_button("btn-registrar",!1)},function(o){console.log(o),c.loading_button("btn-registrar",!1)}))}),"/catalogo/ver/todos"==n.$$url&&(o.tabla_objetos={},o.id_objeto_actual=null,o.opciones_tabla_objetos=s.newOptions().withOption("ajax",{url:"/api/catalogo/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(a,r,e){u(angular.element(a).contents())(o),angular.element($("td",a).eq(4).get(0)).css({width:"135px"})}),o.columnas_tabla_objetos=[l.newColumn("id").withTitle("ID").notSortable(),l.newColumn("nombre").withTitle("Nombre").notSortable(),l.newColumn(null).withTitle("Unidad").renderWith(function(o,a,r){return o.nombre_unidad+" ("+o.abreviatura_unidad+")"}).notSortable(),l.newColumn(null).withTitle("Especificaciones").renderWith(function(o,a,r){return c.cut_string(o.especificaciones,60)}).notSortable(),l.newColumn(null).withTitle("Acciones").renderWith(function(o,a,r){return'<div class="ui icon button blue pop" data-content="Ver Usuario" ng-click="modal_ver_objeto('+o.id+')"><i class="unhide icon"></i></div>\n                        <div class="ui icon button green pop"  data-content="Modificar Usuario" ng-click="modal_modificar_objeto('+o.id+')"><i class="edit icon"></i></div>  \n                        <div class="ui icon button red pop"  data-content="Eliminar Usuario" ng-click="modal_eliminar_objeto('+o.id+')"><i class="remove icon"></i></div>'})],o.modal_ver_objeto=function(e){o.data_objeto={},a({method:"GET",url:"/api/catalogo/mostrar?type=objeto&id="+e,data:o.DatosForm}).then(function(a){o.data_objeto=a.data,angular.element("#modal_ver_objeto").modal("show")},function(o){r.info(o)})},o.modal_modificar_objeto=function(e){o.mostrar_mensaje=!1,o.id_objeto_actual=e,a({method:"GET",url:"/api/catalogo/mostrar?type=objeto&id="+e}).then(function(a){o.DatosForm=a.data,o.DatosForm.cod_clase_objeto=o.DatosForm.cod_clase_objeto.toString(),o.DatosForm.cod_unidad=o.DatosForm.cod_unidad.toString(),setTimeout(function(){angular.element("#unidad").dropdown("set selected",o.DatosForm.cod_unidad),angular.element("#clase_objeto").dropdown("set selected",o.DatosForm.cod_clase_objeto),angular.element("#modal_modificar_objeto").modal("show")},300)},function(o){r.info(o)})},o.procesar_modificar=function(){var e=o.id_objeto_actual;c.loading_button("btn-modificar",!0),a({method:"POST",url:"/api/catalogo/actualizar-objeto?id="+e,data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Objeto modificado con exito",icono:"checkmark",color:"green",mensajes:[]},c.loading_button("btn-modificar",!1),setTimeout(function(){c.reload_tabla(o,"tabla_objetos",function(){})},500)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Error al modificar el objeto",icono:"remove",color:"red",mensajes:a.data.mensajes},c.loading_button("btn-modificar",!1)),r.info(o.DatosForm)},function(o){r.info(o),c.loading_button("btn-modificar",!1)})},o.modal_eliminar_objeto=function(a){o.id_objeto_actual=a,angular.element("#modal_eliminar_objeto").modal("show")},o.cerrar_modal_eliminar=function(){angular.element("#modal_eliminar_objeto").modal("hide")},o.procesar_eliminar=function(){var e=o.id_objeto_eliminar;a({method:"POST",url:"/api/catalogo/eliminar?id="+e}).then(function(a){a.data.resultado?(o.cerrar_modal_eliminar(),setTimeout(function(){c.reload_tabla(o,"tabla_objetos",function(){})},500)):r.info(a)},function(o){r.info(o)})}),"/catalogo/registrar-unidad"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_unidad=function(){var r=$("#formulario_crear_unidad"),i=r.form(reglas_formulario_crear_unidad).form("is valid");i&&(c.loading_button("btn-registrar",!0),a({method:"POST",url:"/api/catalogo/registrar-unidad",data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Unidad creada con exito",icono:"checkmark",color:"green",mensajes:["La unidad ha sido creada"]},e(function(){c.loading_button("btn-registrar",!1),r.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:a.data.mensajes}),c.loading_button("btn-registrar",!1)},function(o){console.log(o),c.loading_button("btn-registrar",!1)}))}),"/catalogo/registrar-clase"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_objeto=function(){var r=$("#formulario_crear_clase_objeto"),i=r.form(reglas_formulario_crear_clase_objeto).form("is valid");i&&(c.loading_button("btn-registrar",!0),a({method:"POST",url:"/api/catalogo/registrar-clase-objeto",data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Clase creada con exito",icono:"checkmark",color:"green",mensajes:["Nueva clase de objeto creada"]},e(function(){c.loading_button("btn-registrar",!1),r.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:a.data.mensajes}),c.loading_button("btn-registrar",!1)},function(o){console.log(o),c.loading_button("btn-registrar",!1)}))})}]),simci.controller("InventarioController",["$scope","$http","$log","$route","$routeParams","$location",function(o,a,r,e,i,t){o.modulo={},o.modulo.nombre="Inventario",o.modulo.icono={tipo:"archive",color:"green"},o.modulo.opciones=[{nombre:"registrar elemento",descripcion:"Esta opcion le permitira registrar nuevos elementos en el inventario",url:"#/inventario/registrar-elemento",icono:"user"},{nombre:"ver inventario",descripcion:"Esta opcion le permitira ver los elementos en el inventario, a su vez tambien podra modificar o eliminar dichos objetos",url:"#/inventario/ver/todos",icono:"user"},{nombre:"registrar almacen",descripcion:"Opcion para crear nuevos almacenes",url:"#/inventario/crear-almacen",icono:"user"},{nombre:"registrar estante",descripcion:"Opcion para crear nuevos estantes",url:"#/inventario/registrar-estante",icono:"user"},{nombre:"crear agrupacion",descripcion:"Esta opcion le permitira crear las agrupaciones por las cuales se ordenaran los elementos",url:"#/",icono:"user"},{nombre:"crear subagrupacion",descripcion:"Opcion para crear alguna caracteristica por la cual tambien ordenar elementos",url:"#/",icono:"user"}],r.info(i),r.info(t)}]),simci.controller("LaboratorioController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,a,r,e,i,t,n,s,l,u,c,m){o.modulo={},o.DatosForm={},o.modulo.nombre="Laboratorio",o.modulo.icono={tipo:"lab",color:"purple"},o.modulo.opciones=[{nombre:"registrar laboratorio",descripcion:"Esta opcion le permitira a単adir nuevos laboratorios",url:"#/laboratorio/crear-laboratorio",icono:"save"},{nombre:"mostrar laboratorio",descripcion:"Esta opcion le permitira ver los nuevos laboratorios",url:"#/laboratorio/ver/todos",icono:"save"}]}]),simci.controller("UsuariosController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","$compile","DTOptionsBuilder","DTColumnBuilder","ToolsService",function(o,a,r,e,i,t,n,s,l,u,c){o.modulo={},o.DatosForm={},o.modulo.nombre="Usuarios",o.modulo.icono={tipo:"users",color:"blue"},o.modulo.opciones=[{nombre:"crear usuarios",descripcion:"Opcion para crear nuevos usuarios en el sistema",url:"#/usuarios/crear",icono:"user"},{nombre:"ver usuarios",descripcion:"Opcion para Ver, Actualizar, Eliminar los usuarios registrados en el sistema",url:"#/usuarios/ver/todos",icono:"eye"},{nombre:"crear permisos",descripcion:"Opcion se podran crear nuevos permisos de usuarios para el sistema",url:"#/usuarios/crear/permiso",icono:"user"},{nombre:"crear tipos de usuario",descripcion:"Opcion para Ver, Actualizar, Eliminar los permisos registrados en el sistema",url:"#/usuarios/crear/tipo-usuario",icono:"user"}],r.info(t),r.info(n),"/usuarios/crear"==n.$$url&&(o.mostrar_mensaje=!1,o.registrar_usuario=function(){var r=$("#formulario_crear_usuario"),i=r.form(reglas_formulario_crear_usuario).form("is valid");i&&($("#btn-registrar").addClass("loading").prop("disabled",!0),a({method:"POST",url:"/api/usuarios/crear-usuario-completo",data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Usuario creado con exito",icono:"checkmark",color:"green",mensajes:["El usuario ha sido almacenado en la base de datos."]},e(function(){$("#btn-registrar").removeClass("loading").prop("disabled",!1),r.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar el formulario",icono:"remove",color:"red",mensajes:a.data.mensajes}),$("#btn-registrar").removeClass("loading").prop("disabled",!1)},function(o){console.log(o),$("#btn-registrar").removeClass("loading").prop("disabled",!1)}))}),"/usuarios/ver/todos"==n.$$url&&(o.tabla_usuarios={},o.id_objeto_actual=null,o.id_usuario_eliminar=null,o.opciones_tabla_usuarios=l.newOptions().withOption("ajax",{url:"/api/usuarios/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(a,r,e){s(angular.element(a).contents())(o),angular.element($("td",a).eq(5).get(0)).css({width:"135px"})}),o.columnas_tabla_usuarios=[u.newColumn("id").withTitle("ID").notSortable(),u.newColumn("usuario").withTitle("Usuario").notSortable(),u.newColumn("email").withTitle("Email").notSortable(),u.newColumn("data_permisos").withTitle("Permisos").renderWith(function(o,a,r){var e="";return o.map(function(o){e+="["+o.nombre.toUpperCase()+"]"}),e}).notSortable(),u.newColumn("data_tipo_usuario.descripcion").withTitle("Tipo de Usuario").notSortable(),u.newColumn(null).withTitle("Acciones").renderWith(function(o,a,r){return'<a class="ui icon button blue" data-content="Ver Usuario" ng-click="modal_ver_usuario('+o.id+')"><i class="unhide icon"></i></a>\n                      <a class="ui icon button green"  data-content="Modificar Usuario" ng-click="modal_modificar_usuario('+o.id+')"><i class="edit icon"></i></a>  \n                      <a class="ui icon button red "  data-content="Eliminar Usuario" ng-click="modal_eliminar_usuario('+o.id+')"><i class="remove icon"></i></a>'})],o.modal_ver_usuario=function(e){o.data_usuario={},a({method:"GET",url:"/api/usuarios/mostrar?type=usuario_full&id="+e}).then(function(a){r.info(a),o.data_usuario=a.data,angular.element("#modal_ver_usuario").modal("show")},function(o){r.info(o)})},o.modal_modificar_usuario=function(i){o.id_usuario_actual=i,a({method:"GET",url:"/api/usuarios/mostrar?type=usuario_full&id="+i,data:o.DatosForm}).then(function(a){o.data_usuario=a.data,o.DatosForm={usuario:a.data.usuario.usuario,email:a.data.usuario.email,tipo_usuario:a.data.usuario.cod_tipo_usuario,permisos:a.data.usuario.data_permisos.map(function(o){return o.codigo}),activo:a.data.usuario.activo},a.data.persona&&(o.DatosForm.primer_nombre=a.data.persona.primer_nombre||null,o.DatosForm.segundo_nombre=a.data.persona.segundo_nombre||null,o.DatosForm.primer_apellido=a.data.persona.primer_apellido||null,o.DatosForm.segundo_apellido=a.data.persona.segundo_apellido||null,o.DatosForm.cedula=a.data.persona.cedula||null,o.DatosForm.sexo=a.data.persona.sexo_id.toString()||null,o.DatosForm.fecha_nacimiento=a.data.persona.fecha_nacimiento||null),e(function(){angular.element("#permisos").dropdown("set selected",o.DatosForm.permisos),angular.element("#tipo_usuario").dropdown("set selected",o.DatosForm.tipo_usuario),angular.element("#sexo").dropdown("set selected",o.DatosForm.sexos)},0,!1),angular.element("#modal_modificar_usuario").modal("show")},function(o){r.info(o)})},o.procesar_modificar=function(){var e=o.id_usuario_actual;c.loading_button("btn-modificar",!0),a({method:"POST",url:"/api/usuarios/actualizar-usuario-completo?id="+e,data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Usuario modificado con exito",icono:"checkmark",color:"green",mensajes:[]},c.loading_button("btn-modificar",!1),setTimeout(function(){c.reload_tabla(o,"tabla_usuarios",function(){})},500)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Error al modificar el usuario",icono:"remove",color:"red",mensajes:a.data.mensajes},c.loading_button("btn-modificar",!1)),r.info(o.DatosForm)},function(o){r.info(o),c.loading_button("btn-modificar",!1)})},o.modal_eliminar_usuario=function(a){o.id_usuario_eliminar=a,angular.element("#modal_eliminar_usuario").modal("show")},o.cerrar_modal_eliminar=function(){angular.element("#modal_eliminar_usuario").modal("hide")},o.procesar_eliminar=function(){var e=o.id_usuario_eliminar;a({method:"POST",url:"/api/usuarios/eliminar?id="+e}).then(function(a){a.data.resultado?(o.cerrar_modal_eliminar(),setTimeout(function(){c.reload_tabla(o,"tabla_usuarios",function(o){})},500)):r.info(a)},function(o){r.info(o)})}),"/usuarios/crear/permiso"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_permiso=function(){var r=$("#formulario_crear_permiso"),i=r.form(reglas_formulario_crear_permiso).form("is valid");i&&(c.loading_button("btn-registrar",!0),a({method:"POST",url:"/api/usuarios/registrar-permiso",data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Permiso creado con exito",icono:"checkmark",color:"green",mensajes:["Permiso registrado en la base de datos"]},e(function(){c.loading_button("btn-registrar",!1),r.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:a.data.mensajes}),c.loading_button("btn-registrar",!1)},function(o){console.log(o),c.loading_button("btn-registrar",!1)}))}),"/usuarios/crear/tipo-usuario"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_tipo_usuario=function(){var r=$("#formulario_crear_tipo_usuario"),i=r.form(reglas_formulario_crear_tipo_usuario).form("is valid");i&&(c.loading_button("btn-registrar",!0),a({method:"POST",url:"/api/usuarios/registrar-tipo-usuario",data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Tipo de usuario creado con exito",icono:"checkmark",color:"green",mensajes:["Tipo de usuario guardado en la base de datos"]},e(function(){c.loading_button("btn-registrar",!1),r.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:a.data.mensajes}),c.loading_button("btn-registrar",!1)},function(o){console.log(o),c.loading_button("btn-registrar",!1)}))})}]);