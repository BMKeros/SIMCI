simci.controller("CatalogoController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,e,i,a,r,t,n,l,s,c,u,d){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Catalogo",o.modulo.icono={tipo:"book",color:"orange"},o.modulo.opciones=[{nombre:"registrar objeto",descripcion:"Esta opcion le permitira añadir nuevos objetos al catalogo",url:"#/catalogo/registrar-objeto",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"ver catalogo",descripcion:"Esta opcion le permitira ver, modificar o eliminar los objetos del catalogos",url:"#/catalogo/ver/todos",icono:"eye",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_PROFESOR,TIPO_USER_SUPERVISOR]},{nombre:"registrar unidad",descripcion:"Esta opcion le permitira añadir nuevas unidades para objetos del catalogo",url:"#/catalogo/registrar-unidad",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"registrar clase",descripcion:"Esta opcion le permitira añadir nuevas clases para objetos del objetos",url:"#/catalogo/registrar-clase",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]}],i.info(t),i.info(n),"/catalogo/registrar-objeto"==n.$$url&&(u.reload_template_cache(r,d),o.mostrar_mensaje=!1,o.mostrar_mensaje_modificacion=!1,o.registrar_objeto=u.registrar_dinamico(o,e,a,{url:"/api/catalogo/registrar-objeto",formulario:{id:"formulario_crear_objeto",reglas:reglas_formulario_crear_objeto},exito:{titulo:"Objeto creado con exito",mensajes:["El Objeto ha sido agregado al catalogo."]}})),"/catalogo/ver/todos"==n.$$url&&(o.tabla_objetos={},o.id_objeto_actual=null,o.opciones_tabla_objetos=l.newOptions().withOption("ajax",{url:"/api/catalogo/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){c(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_objetos=[s.newColumn(null).withTitle("#").renderWith(function(o,e,i){return u.printf('<a class="ui tiny blue tag label">{0}</a>',o.id)}).withOption("width","5%").notSortable(),s.newColumn(null).withTitle("Nombre").renderWith(function(o,e,i){return o.nombre+'<img class="ui right floated spopup" style= margin-left:190px; src="/img/data.jpg" width="20" height="20" data-content="Mostrar DataSheet" onclick="alertify.DataSheetDialog(1);">'}).withOption("width","30%").notSortable(),s.newColumn(null).withTitle("Unidad").renderWith(function(o,e,i){return o.nombre_unidad+" ("+o.abreviatura_unidad+")"}).withOption("width","12%").notSortable(),s.newColumn(null).withTitle("Especificaciones").renderWith(function(o,e,i){return u.cut_string(o.especificaciones,60)}).notSortable(),s.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<div class="ui icon button blue spopup" data-content="Ver Objeto" ng-click="modal_ver_objeto('+o.id+')"><i class="unhide icon"></i></div><div class="ui icon button green spopup"  data-content="Modificar Objeto" ng-click="modal_modificar_objeto('+o.id+')"><i class="edit icon"></i></div><div class="ui icon button red spopup"  data-content="Eliminar Objeto" ng-click="modal_eliminar_objeto('+o.id+')"><i class="remove icon"></i></div>'}).withOption("width","17%")],o.modal_ver_objeto=function(a){o.data_objeto={},e({method:"GET",url:"/api/catalogo/mostrar?type=objeto&id="+a,data:o.DatosForm}).then(function(e){o.data_objeto=e.data,angular.element("#modal_ver_objeto").modal("show")},function(o){i.info(o)})},o.modal_modificar_objeto=function(a){o.mostrar_mensaje=!1,o.id_objeto_actual=a,e({method:"GET",url:"/api/catalogo/mostrar?type=objeto&id="+a}).then(function(e){o.DatosForm=e.data,o.DatosForm.cod_clase_objeto=o.DatosForm.cod_clase_objeto.toString(),o.DatosForm.cod_unidad=o.DatosForm.cod_unidad.toString(),setTimeout(function(){angular.element("#unidad").dropdown("set selected",o.DatosForm.cod_unidad),angular.element("#clase_objeto").dropdown("set selected",o.DatosForm.cod_clase_objeto),angular.element("#modal_modificar_objeto").modal("show")},300)},function(o){i.info(o)})},o.procesar_modificar=function(){var a=o.id_objeto_actual;u.loading_button("btn-modificar",!0),e({method:"POST",url:"/api/catalogo/actualizar-objeto?id="+a,data:o.DatosForm}).then(function(e){e.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Objeto modificado con exito",icono:"checkmark",color:"green",mensajes:[]},u.loading_button("btn-modificar",!1),setTimeout(function(){u.reload_tabla(o,"tabla_objetos",function(){})},500)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Error al modificar el objeto",icono:"remove",color:"red",mensajes:e.data.mensajes},u.loading_button("btn-modificar",!1)),i.info(o.DatosForm)},function(o){i.info(o),u.loading_button("btn-modificar",!1)})},o.modal_eliminar_objeto=function(e){o.id_objeto_actual=e,angular.element("#modal_eliminar_objeto").modal("show")},o.cerrar_modal_eliminar=function(){angular.element("#modal_eliminar_objeto").modal("hide")},o.procesar_eliminar=function(){var a=o.id_objeto_eliminar;e({method:"POST",url:"/api/catalogo/eliminar?id="+a}).then(function(e){e.data.resultado?(o.cerrar_modal_eliminar(),setTimeout(function(){u.reload_tabla(o,"tabla_objetos",function(){})},500)):i.info(e)},function(o){i.info(o)})}),"/catalogo/registrar-unidad"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_unidad=function(){var i=$("#formulario_crear_unidad"),r=i.form(reglas_formulario_crear_unidad).form("is valid");r&&(u.loading_button("btn-registrar",!0),e({method:"POST",url:"/api/catalogo/registrar-unidad",data:o.DatosForm}).then(function(e){e.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Unidad creada con exito",icono:"checkmark",color:"green",mensajes:["La unidad ha sido creada"]},a(function(){u.loading_button("btn-registrar",!1),i.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:e.data.mensajes}),u.loading_button("btn-registrar",!1)},function(o){console.log(o),u.loading_button("btn-registrar",!1)}))}),"/catalogo/registrar-clase"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_objeto=function(){var i=$("#formulario_crear_clase_objeto"),r=i.form(reglas_formulario_crear_clase_objeto).form("is valid");r&&(u.loading_button("btn-registrar",!0),e({method:"POST",url:"/api/catalogo/registrar-clase-objeto",data:o.DatosForm}).then(function(e){e.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Clase creada con exito",icono:"checkmark",color:"green",mensajes:["Nueva clase de objeto creada"]},a(function(){u.loading_button("btn-registrar",!1),i.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:e.data.mensajes}),u.loading_button("btn-registrar",!1)},function(o){console.log(o),u.loading_button("btn-registrar",!1)}))})}]),simci.controller("ConsultaController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,e,i,a,r,t,n,l,s,c,u,d){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Consulta",o.modulo.icono={tipo:"search",color:"olive"},o.modulo.opciones=[{nombre:"consulta",descripcion:"Esta opcion le permitira observar la disponibilidad del inventario y realizar busquedas",url:"#/consulta/ver/todos",icono:"unhide",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_PROFESOR,TIPO_USER_SUPERVISOR,TIPO_USER_ESTUDIANTE,TIPO_USER_ALMACENISTA]}],i.info(t),i.info(n),"/consulta/ver/todos"==n.$$url&&(o.tabla_laboratorios={},o.id_laboratorio_actual=null,o.opciones_tabla_consultas=l.newOptions().withOption("ajax",{url:"/api/consultas/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,a){c(angular.element(e).contents())(o)}),o.columnas_tabla_consultas=[s.newColumn(null).withTitle("Codigo").renderWith(function(o,e,i){return u.printf('<a class="ui tiny blue tag label">{0}</a>',o.codigo)}).notSortable().withOption("width","7%"),s.newColumn("nombre").withTitle("Nombre").notSortable(),s.newColumn("disponibilidad").withTitle("Disponibilidad").notSortable(),s.newColumn("descripcion").withTitle("Descripcion").notSortable()])}]),simci.controller("DocumentosController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,e,i,a,r,t,n,l,s,c,u,d){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Documentos",o.modulo.icono={tipo:"travel",color:"teal"},o.modulo.opciones=[{nombre:"enviar documentos",descripcion:"Esta opcion le permitira enviar documentos",url:"#/documentos/enviar-documentos",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]},{nombre:"subir documentos",descripcion:"Esta opcion le permitira mostrar los documentos enviados y recibidos",url:"#/documentos/subir-documentos",icono:"unhide",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]},{nombre:"mostrar documentos",descripcion:"Esta opcion le permitira mostrar los documentos enviados y recibidos",url:"#/documentos/ver/todos",icono:"unhide",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]}],"/documentos/ver/todos"==n.$$url&&(o.tabla_documentos={},o.id_objeto_documentos=null,o.opciones_tabla_documentos=l.newOptions().withOption("ajax",{url:"/api/documentos/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){c(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_documentos=[s.newColumn(null).withTitle("Fecha").notSortable(),s.newColumn("documentos_enviados").withTitle("Documentos Enviados").notSortable(),s.newColumn("documentos_respondidos").withTitle("Documentos Respondidos").notSortable(),s.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<div class="ui icon button blue spopup" data-content="Ver Documentos" ng-click="modal_ver_documentos('+o.id+')"><i class="unhide icon"></i></div><div class="ui icon button green spopup"  data-content="Modificar Documentos" ng-click="modal_modificar_documentos('+o.id+')"><i class="edit icon"></i></div><div class="ui icon button red spopup"  data-content="Eliminar Documentos" ng-click="modal_eliminar_documentos('+o.id+')"><i class="remove icon"></i></div>'}).withOption("width","17%")])}]),simci.controller("InstitucionesController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,e,i,a,r,t,n,l,s,c,u,d){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Instituciones",o.modulo.icono={tipo:"building",color:"red"},o.modulo.opciones=[{nombre:"ministerio de defensa",descripcion:"El Ministerio del Poder Popular para la Defensa es el máximo órgano administrativo en materia de Defensa integral de la Nación, encargado de la formulación, adopción,   seguimiento y evaluación de las políticas, estrategias, planes, programas y proyectos del Sector Defensa.",url:"http://www.mindefensa.gob.ve/",icono:"legal",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_PROFESOR,TIPO_USER_SUPERVISOR,TIPO_USER_ESTUDIANTE,TIPO_USER_ALMACENISTA]},{nombre:"UPTAG",descripcion:"Institución Universitaria líder, con un perfil continuado de excelencia, egresados de preferencia en el mercado laboral; impulsadores de una sociedad productiva basada en principios de calidad, equidad, solidaridad y compromiso.",url:"http://iutag.org/",icono:"university",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_PROFESOR,TIPO_USER_SUPERVISOR,TIPO_USER_ESTUDIANTE,TIPO_USER_ALMACENISTA]},{nombre:"bomberos nacionales",descripcion:"Esta opcion le redireccionara al portal principal de los bomberos nacionales",url:"http://",icono:"fire",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_PROFESOR,TIPO_USER_SUPERVISOR,TIPO_USER_ESTUDIANTE,TIPO_USER_ALMACENISTA]},{nombre:"daex",descripcion:"Organizacion con el fin de recepcionar, almacenar, distribuir y asignar armas, municiones, explosivos, sustancias químicas, radioactivas; y afines, así como controlar la fabricación, el uso, manejo, transporte y comercialización de los mismos.",url:"http://www.daex.mil.ve/",icono:"fire",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_PROFESOR,TIPO_USER_SUPERVISOR,TIPO_USER_ESTUDIANTE,TIPO_USER_ALMACENISTA]},{nombre:"numero de emergencias nacionales",descripcion:"Esta opcion le redireccionara al portal principal de los bomberos nacionales",url:"http://www.ultimasnoticias.com.ve/noticias/ciudad/servicios-publicos/numeros-de-emergencia-en-todo-el-pais.aspx",icono:"fire",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_PROFESOR,TIPO_USER_SUPERVISOR,TIPO_USER_ESTUDIANTE,TIPO_USER_ALMACENISTA]},{nombre:"cicpc",descripcion:"Cuerpo de Investigaciones Científicas, Penales y Criminalísticas. Institución que garantiza la eficiencia en la Investigación del delito, mediante su determinación científica, asegurando el ejercicio de la acción penal que conduzca a una sana administración de justicia.",url:"https://www.cicpc.gob.ve/",icono:"fire",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_PROFESOR,TIPO_USER_SUPERVISOR,TIPO_USER_ESTUDIANTE,TIPO_USER_ALMACENISTA]}]}]),simci.controller("InventarioController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","$compile","DTOptionsBuilder","DTColumnBuilder","ToolsService","$templateCache",function(o,e,i,a,r,t,n,l,s,c,u,d){if(o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Inventario",o.modulo.icono={tipo:"archive",color:"green"},o.modulo.opciones=[{nombre:"registrar elemento",descripcion:"Esta opcion le permitira registrar nuevos elementos en el inventario",url:"#/inventario/registrar-elemento",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"entrada / salida",descripcion:"Esta opcion le permitira dar entrada o salida al los objetos del inventario",url:"#/inventario/entrada-salida",icono:"compress",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR]},{nombre:"ver inventario",descripcion:"Esta opcion le permitira ver los elementos en el inventario, a su vez tambien podra modificar o eliminar dichos objetos",url:"#/inventario/ver/elementos",icono:"eye",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]},{nombre:"Almacen",descripcion:"Opcion para crear nuevos almacenes",icono:"write",ver_dropdown:!0,opciones_dropdown:[{nombre:"registrar Almacen",url:"#/inventario/registrar-almacen"},{nombre:"ver Almacenes",url:"#/inventario/ver/almacenes"}],show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"crear sub dimension",descripcion:"Opcion para crear sub dimenciones",url:"#/inventario/registrar-sub-dimension",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"crear agrupacion",descripcion:"Esta opcion le permitira crear las agrupaciones por las cuales se ordenaran los elementos",url:"#/inventario/registrar-agrupacion",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"crear sub agrupacion",descripcion:"Opcion para crear alguna caracteristica por la cual tambien ordenar elementos",url:"#/inventario/registrar-sub-agrupacion",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]}],i.info(t),i.info(n),"/inventario/registrar-elemento"==n.$$url&&(u.reload_template_cache(r,d),o.mostrar_mensaje=!1,o.registrar_elemento=u.registrar_dinamico(o,e,a,{url:"/api/inventario/registrar-elemento",formulario:{id:"formulario_registrar_elemento",reglas:reglas_formulario_registrar_elemento},exito:{titulo:"Elemento registrado con exito",mensajes:["El elemento ha sido registrado en la base de datos."]}})),"/inventario/registrar-almacen"==n.$$url&&(u.reload_template_cache(r,d),o.mostrar_mensaje=!1,o.registrar_almacen=u.registrar_dinamico(o,e,a,{url:"/api/inventario/registrar-almacen",formulario:{id:"formulario_registrar_almacen",reglas:reglas_formulario_registrar_almacen},exito:{titulo:"Almacen creado con exito",mensajes:["El almacen ha sido registrado en la base de datos."]}})),"/inventario/registrar-sub-dimension"==n.$$url&&(o.mostrar_mensaje=!1,o.registrar_sub_dimension=u.registrar_dinamico(o,e,a,{url:"/api/inventario/registrar-sub-dimension",formulario:{id:"reglas_formulario_registrar_sub_dimension",reglas:reglas_formulario_registrar_sub_dimension},exito:{titulo:"Sub dimension creado con exito",mensajes:["La sub dimension ha sido registrado en la base de datos."]}})),"/inventario/registrar-agrupacion"==n.$$url&&(o.mostrar_mensaje=!1,o.registrar_agrupacion=u.registrar_dinamico(o,e,a,{url:"/api/inventario/registrar-agrupacion",formulario:{id:"reglas_formulario_registrar_agrupacion",reglas:reglas_formulario_registrar_agrupacion},exito:{titulo:"Agrupacion creado con exito",mensajes:["La agrupacion ha sido registrado en la base de datos."]}})),"/inventario/registrar-sub-agrupacion"==n.$$url&&(o.mostrar_mensaje=!1,o.registrar_sub_agrupacion=u.registrar_dinamico(o,e,a,{url:"/api/inventario/registrar-sub-agrupacion",formulario:{id:"reglas_formulario_registrar_sub_agrupacion",reglas:reglas_formulario_registrar_sub_agrupacion},exito:{titulo:"Sub agrupacion creado con exito",mensajes:["La sub agrupacion ha sido registrado en la base de datos."]}})),"/inventario/ver/elementos"==n.$$url){o.tabla_elementos={},o.id_elemento_actual=null;var _=u;o.opciones_tabla_elementos=s.newOptions().withOption("ajax",{url:"/api/inventario/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){l(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_elementos=[c.newColumn(null).withTitle("Codigo de elemento").renderWith(function(o,e,i){return u.generar_codigo_elemento(o,"label")}).notSortable().withOption("width","22%"),c.newColumn("nombre_objeto").withTitle("Objeto").notSortable(),c.newColumn(null).withTitle("Disponibilidad").renderWith(function(o,e,i){return u.quitar_ceros_decimales(o.cantidad_disponible)}).notSortable().withOption("width","10%"),c.newColumn(null).withTitle("Unidad").renderWith(function(o,e,i){return o.nombre_unidad+" ("+o.abreviatura+")"}).notSortable().withOption("width","15%"),c.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<a class="ui icon button blue spopup" data-content="Ver Elemento" ng-click="modal_ver_elemento('+_.anadir_comillas_params(o.cod_dimension,o.cod_subdimension,o.cod_agrupacion,o.cod_objeto,o.numero_orden)+')"><i class="unhide icon"></i></a><a class="ui icon button green spopup"  data-content="Modificar Elemento" ng-click="modal_modificar_elemento('+_.anadir_comillas_params(o.cod_dimension,o.cod_subdimension,o.cod_agrupacion,o.cod_objeto,o.numero_orden)+')"><i class="edit icon"></i></a><a class="ui icon button red spopup"  data-content="Eliminar Elemento" ng-click="modal_eliminar_elemento('+_.anadir_comillas_params(o.cod_dimension,o.cod_subdimension,o.cod_agrupacion,o.cod_objeto,o.numero_orden)+')"><i class="remove icon"></i></a>'}).notSortable().withOption("width","15%")],o.modal_ver_elemento=function(i,a,r,t,n){o.data_elemento={},u.mostrar_modal_dinamico(o,e,{url:"/api/inventario/mostrar?type=elemento_full&"+u.printf("cod_dimension={0}&cod_subdimension={1}&cod_agrupacion={2}&cod_objeto={3}&numero_orden={4}",i,a,r,t,n),scope_data_save_success:"data_elemento",id_modal:"modal_ver_elemento"})}}"/inventario/entrada-salida"==n.$$url&&(o.tabla_elementos={},o.id_elemento_actual=null,o.opciones_tabla_elementos=s.newOptions().withOption("ajax",{url:"/api/inventario/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){l(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_elementos=[c.newColumn(null).withTitle("Codigo de elemento").renderWith(function(o,e,i){return u.generar_codigo_elemento(o,"label")}).notSortable().withOption("width","20%"),c.newColumn("nombre_objeto").withTitle("Objeto").notSortable(),c.newColumn(null).withTitle("Disponibilidad").renderWith(function(o,e,i){return u.quitar_ceros_decimales(o.cantidad_disponible)}).notSortable().withOption("width","10%"),c.newColumn(null).withTitle("Unidad").renderWith(function(o,e,i){return o.nombre_unidad+" ("+o.abreviatura+")"}).notSortable().withOption("width","15%"),c.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<a class="ui icon button green spopup" data-content="Entrada Elemento" ng-click=""><i class="sign in icon"></i></a><a class="ui icon button red spopup"  data-content="Salida Elemento" ng-click=""><i class="sign out icon"></i></a>'}).notSortable().withOption("width","10%")]),"/inventario/ver/almacenes"==n.$$url&&(o.tabla_almacenes={},o.id_almacen_actual=null,o.opciones_tabla_almacenes=s.newOptions().withOption("ajax",{url:"/api/inventario/mostrar?type=paginacion_almacenes",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){l(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_almacenes=[c.newColumn(null).withTitle("Codigo").renderWith(function(o,e,i){return u.printf('<a class="ui tiny blue tag label">{0}</a>',o.codigo)}).notSortable().withOption("width","7%"),c.newColumn(null).withTitle("Responsable").renderWith(function(o,e,i){return o.nombre_responsable+" "+o.apellido_responsable}).notSortable(),c.newColumn(null).withTitle("Primer auxiliar").renderWith(function(o,e,i){return o.nombre_primer_auxiliar+" "+o.apellido_primer_auxiliar}).notSortable(),c.newColumn(null).withTitle("Segundo auxiliar").renderWith(function(o,e,i){return o.nombre_segundo_auxiliar&&o.apellido_segundo_auxiliar?o.nombre_segundo_auxiliar+" "+o.apellido_segundo_auxiliar:"No Especificado"}).notSortable(),c.newColumn("descripcion").withTitle("Descripcion").notSortable(),c.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<a class="ui icon button blue spopup" data-content="Ver Almacen" ng-click="modal_ver_elemento(\''+o.codigo+'\')"><i class="unhide icon"></i></a><a class="ui icon button green spopup"  data-content="Modificar Almacen" ng-click="modal_modificar_usuario(\''+o.codigo+'\')"><i class="edit icon"></i></a><a class="ui icon button red spopup"  data-content="Eliminar Almacen" ng-click="modal_eliminar_usuario(\''+o.codigo+'\')"><i class="remove icon"></i></a>'}).notSortable().withOption("width","15%")])}]),simci.controller("LaboratorioController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache","$filter",function(o,e,i,a,r,t,n,l,s,c,u,d,_){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Laboratorio",o.modulo.icono={tipo:"lab",color:"purple"},o.modulo.opciones=[{nombre:"registrar laboratorio",descripcion:"Esta opcion le permitira añadir nuevos laboratorios",url:"#/laboratorio/crear-laboratorio",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"mostrar laboratorio",descripcion:"Esta opcion le permitira ver los nuevos laboratorios",url:"#/laboratorio/ver/todos",icono:"unhide",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]},{nombre:"agregar stock",descripcion:"Esta opcion le permitira agregar nuevos stock al laboratorios",url:"#/laboratorio/agregar-stock",icono:"plus",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"mostrar stock",descripcion:"Esta opcion le permitira ver los nuevos stock y moverlos a nuevos laboratorios",url:"#/laboratorio/ver/stock",icono:"eye",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]},{nombre:"mover stock",descripcion:"Esta opcion le permitira mover los stock del laboratorios y moverlos a nuevos laboratorios",url:"#/laboratorio/mover-stock",icono:"external",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]}],i.info(t),i.info(n),"/laboratorio/crear-laboratorio"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_laboratorio=u.registrar_dinamico(o,e,a,{url:"/api/laboratorio/registrar-laboratorio",formulario:{id:"formulario_crear_laboratorio",reglas:reglas_formulario_registrar_laboratorio},exito:{titulo:"Laboratoiro creado con exito",mensajes:["Nuevo Laboratorio registrado en la base de datos."]}})),"/laboratorio/ver/todos"==n.$$url&&(o.tabla_laboratorios={},o.id_laboratorio_actual=null,o.opciones_tabla_laboratorios=l.newOptions().withOption("ajax",{url:"/api/laboratorio/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){c(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_laboratorios=[s.newColumn(null).withTitle("Codigo").renderWith(function(o,e,i){return u.printf('<a class="ui tiny blue tag label">{0}</a>',o.codigo)}).notSortable().withOption("width","7%"),s.newColumn("nombre").withTitle("Nombre").notSortable(),s.newColumn("descripcion").withTitle("Descripcion").notSortable(),s.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<a class="ui icon button blue spopup" data-content="Ver Laboratorio" ng-click="modal_ver_laboratorio(\''+o.codigo+'\')"><i class="unhide icon"></i></a><a class="ui icon button green spopup"  data-content="Modificar Laboratorio" ng-click="modal_modificar_laboratorio(\''+o.codigo+'\')"><i class="edit icon"></i></a><a class="ui icon button red spopup"  data-content="Eliminar Laboratorio" ng-click="modal_eliminar_laboratorio(\''+o.codigo+'\')"><i class="remove icon"></i></a>'}).withOption("width","15%")],o.modal_ver_laboratorio=function(i){o.data_laboratorio={},u.mostrar_modal_dinamico(o,e,{url:"/api/laboratorio/mostrar?type=laboratorio_full&id="+i,scope_data_save_success:"data_laboratorio",id_modal:"modal_ver_laboratorio"})},o.modal_modificar_laboratorio=function(a){o.id_lab_actual=a,o.mostrar_mensaje=!1,e({method:"GET",url:"/api/laboratorio/mostrar?type=laboratorio_full&id="+a}).then(function(e){o.DatosForm=e.data,setTimeout(function(){angular.element("#modal_modificar_laboratorio").modal("show")},300)},function(o){i.info(o)})},o.procesar_modificar=function(){var i=o.id_lab_actual;u.loading_button("btn-modificar",!0),e({method:"POST",url:"/api/laboratorio/actualizar-laboratorio?id="+i,data:o.DatosForm}).then(function(e){e.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Laboratorio modificado con exito",icono:"checkmark",color:"green",mensajes:[]},u.loading_button("btn-modificar",!1),setTimeout(function(){u.reload_tabla(o,"tabla_laboratorios",function(){})},500)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Error al modificar el laboratorio",icono:"remove",color:"red",mensajes:e.data.mensajes},u.loading_button("btn-modificar",!1))},function(o){u.loading_button("btn-modificar",!1)})},o.modal_eliminar_laboratorio=function(a){alertify.confirm("Seguro que desea eliminar este laboratorio!",function(){e({method:"POST",url:"/api/laboratorio/verificar?id="+a}).then(function(r){r.data.resultado?alertify.alert(r.data.mensajes):alertify.confirm(r.data.mensajes,function(){e({method:"POST",url:"/api/laboratorio/eliminar?id="+a}).then(function(e){e.data.resultado?setTimeout(function(){u.reload_tabla(o,"tabla_laboratorios",function(o){})},500):i.info(e)},function(o){i.info(o)})}).set("title","¡Alerta!")},function(o){i.info(o)})}).set("title","¡Alerta!")}),"/laboratorio/ver/stock"==n.$$url&&(o.tabla_stock={},o.id_objeto_stock=null,o.opciones_tabla_stock=l.newOptions().withOption("ajax",{url:"/api/stock/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){c(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_stock=[s.newColumn(null).withTitle("Objeto").notSortable(),s.newColumn("nombre").withTitle("Nombre").notSortable(),s.newColumn("laboratorio").withTitle("Laboratorio").notSortable(),s.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<div class="ui icon button blue spopup" data-content="Ver Stock" ng-click="modal_ver_stock('+o.id+')"><i class="unhide icon"></i></div><div class="ui icon button green spopup"  data-content="Modificar Stock" ng-click="modal_modificar_stock('+o.id+')"><i class="edit icon"></i></div><div class="ui icon button red spopup"  data-content="Eliminar Stock" ng-click="modal_eliminar_stock('+o.id+')"><i class="remove icon"></i></div>'}).withOption("width","17%")]),"/laboratorio/agregar-stock"==n.$$url&&(o.items_tabla_stock=[],o.select_laboratorio="",o.select_objeto="",o.cantidad=0,o.agregar_stock_tabla=function(){var i=$("#formulario_registrar_stock"),a=i.form(reglas_formulario_agregar_stock).form("is valid");a&&e({method:"GET",url:"/api/laboratorio/mostrar?type=agregar_stock&cod_laboratorio="+o.select_laboratorio+"&cod_objeto="+o.select_objeto}).then(function(e){var i=e.data,a=o.items_tabla_stock.findIndex(function(e,i,a){return e.cod_objeto==o.select_objeto&&e.cod_laboratorio==o.select_laboratorio});-1===a?o.items_tabla_stock.push({id_item_stock:u.generar_id_unico(),nombre_laboratorio:i.nombre_laboratorio,cod_laboratorio:i.cod_laboratorio,cod_objeto:i.cod_objeto,nombre_objeto:i.nombre_objeto,cantidad:o.cantidad}):alertify.error("Ya agregaste un stock igual a este en la lista")},function(o){u.generar_alerta_status(o)})},o.eliminar_stock_tabla=function(e){o.items_tabla_stock=o.items_tabla_stock.filter(function(o){return o.id_item_stock!==e})})}]),simci.controller("OrdenesController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,e,i,a,r,t,n,l,s,c,u,d){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Ordenes",o.modulo.icono={tipo:"edit",color:"yellow"},o.modulo.opciones=[{nombre:"generar ordenes",descripcion:"Esta opcion le permitira crear ordenes",url:"#/ordenes/crear-ordenes",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]},{nombre:"mostrar ordenes",descripcion:"Esta opcion le permitira ver las ordenes existentes",url:"#/ordenes/ver/todos",icono:"unhide",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]}],"/ordenes/ver/todos"==n.$$url&&(o.tabla_ordenes={},o.id_objeto_ordenes=null,o.opciones_tabla_ordenes=l.newOptions().withOption("ajax",{url:"/api/ordenes/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){
c(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_ordenes=[s.newColumn(null).withTitle("Fecha").notSortable(),s.newColumn("tipo de orden").withTitle("Tipo de Orden").notSortable(),s.newColumn("ordenes hechas").withTitle("Ordenes Hechas").notSortable(),s.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<div class="ui icon button blue spopup" data-content="Ver Ordenes" ng-click="modal_ver_ordenes('+o.id+')"><i class="unhide icon"></i></div><div class="ui icon button green spopup"  data-content="Modificar Ordenes" ng-click="modal_modificar_ordenes('+o.id+')"><i class="edit icon"></i></div><div class="ui icon button red spopup"  data-content="Eliminar Ordenes" ng-click="modal_eliminar_ordenes('+o.id+')"><i class="remove icon"></i></div>'}).withOption("width","17%")])}]),simci.controller("ProveedorController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,e,i,a,r,t,n,l,s,c,u,d){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Proveedores",o.modulo.icono={tipo:"shop",color:"brown"},o.modulo.opciones=[{nombre:"registrar proveedor",descripcion:"Esta opcion le permitira crear nuevos proveedores",url:"#/proveedores/registrar-proveedor",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA]},{nombre:"mostrar provedores",descripcion:"Esta opcion le permitira ver proveedores registrados",url:"#/proveedores/ver/todos",icono:"unhide",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR]}],"/proveedores/registrar-proveedor"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.cargar_municipios=function(i){var r=angular.element("#select_municipios"),t=angular.element("#select_ciudades"),n=angular.element("#select_parroquias");a(function(){r.dropdown("clear"),t.dropdown("clear"),n.dropdown("clear")}),setTimeout(function(){o.cargar_ciudades(i),r.addClass("loading"),e({method:"GET",url:"/api/consultas/obtener/municipio?id_estado="+i}).then(function(o){var e="";o.data.forEach(function(o){e+=u.printf('<div class="item" data-value="{0}">{1}</div>',o.value,o.name)}),r.find(".menu").html(e),r.removeClass("loading disabled")})},500)},o.cargar_parroquias=function(o){var i=$("#select_parroquias");i.addClass("loading"),e({method:"GET",url:"/api/consultas/obtener/parroquia?id_municipio="+o}).then(function(o){var e="";o.data.forEach(function(o){e+=u.printf('<div class="item" data-value="{0}">{1}</div>',o.value,o.name)}),i.find(".menu").html(e),i.removeClass("loading disabled")})},o.cargar_ciudades=function(o){var i=$("#select_ciudades");i.addClass("loading"),e({method:"GET",url:"/api/consultas/obtener/ciudad?id_estado="+o}).then(function(o){var e="";o.data.forEach(function(o){e+=u.printf('<div class="item" data-value="{0}">{1}</div>',o.value,o.name)}),i.find(".menu").html(e),i.removeClass("loading disabled")})},o.registrar_proveedor=u.registrar_dinamico(o,e,a,{url:"/api/proveedores/registrar-proveedor",formulario:{id:"formulario_crear_proveedor",reglas:reglas_formulario_registrar_proveedor},exito:{titulo:"Proveedor registrado con exito",mensajes:["Nuevo proveedor registrado en la base de datos."]}})),"/proveedores/ver/todos"==n.$$url&&(o.tabla_proveedores={},o.id_proveedor_actual=null,o.opciones_tabla_proveedores=l.newOptions().withOption("ajax",{url:"/api/proveedores/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){c(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_proveedores=[s.newColumn(null).withTitle("Codigo").renderWith(function(o,e,i){return u.printf('<a class="ui tiny blue tag label">{0}</a>',o.codigo)}).withOption("width","7%").notSortable(),s.newColumn("razon_social").withTitle("Razon Social").notSortable(),s.newColumn("doc_identificacion").withTitle("Doc. Identificacion").withOption("width","15%").notSortable(),s.newColumn("email").withTitle("Email").withOption("width","20%").notSortable(),s.newColumn(null).withTitle("Telefonos").renderWith(function(o,e,i){return"("+o.telefono_movil1+")("+o.telefono_fijo1+")"}).withOption("width","13%").notSortable(),s.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<div class="ui icon button blue spopup" data-content="Ver Proveedor" ng-click="modal_ver_proveedor(\''+o.codigo+'\')"><i class="unhide icon"></i></div><div class="ui icon button green spopup"  data-content="Modificar Proveedor" ng-click="modal_modificar_objeto(\''+o.codigo+'\')"><i class="edit icon"></i></div><div class="ui icon button red spopup"  data-content="Eliminar Proveedor" ng-click="modal_eliminar_proveedor(\''+o.codigo+'\')"><i class="remove icon"></i></div>'}).withOption("width","14%")],o.modal_ver_proveedor=function(i){o.data_proveedor={},u.mostrar_modal_dinamico(o,e,{url:"/api/proveedores/mostrar?type=full&codigo="+i,scope_data_save_success:"data_proveedor",id_modal:"modal_ver_proveedor"})},o.modal_eliminar_proveedor=function(i){alertify.confirm("Seguro que desea eliminar este proveedor?",function(){e({method:"POST",url:"/api/proveedores/verificar?codigo="+i}).then(function(a){a.data.resultado?alertify.alert("No puede eliminar este proveedor debido que mantiene relaciones con otras entidades. Verifique para proceder con la accion."):alertify.confirm("Confirme si desea eliminar",function(){e({method:"POST",url:"/api/proveedores/eliminar?codigo="+i}).then(function(e){e.data.resultado?setTimeout(function(){u.reload_tabla(o,"tabla_proveedores",function(o){})},500):alertify.error("Ha ocurrido un error al realizar la operacion")},function(o){u.generar_alerta_status(o)})}).set("title","¡Alerta!")},function(o){u.generar_alerta_status(o)})}).set("title","¡Alerta!")})}]),simci.controller("ReportesController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","$compile","DTOptionsBuilder","DTColumnBuilder","ToolsService",function(o,e,i,a,r,t,n,l,s,c,u){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Reportes",o.modulo.icono={tipo:"file text outline",color:"violet"},o.modulo.opciones=[{nombre:"registrar reportes",descripcion:"Esta opcion le permitira crear nuevos reportes",url:"#/reportes/generar-reporte",icono:"write",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]},{nombre:"mostrar reportes",descripcion:"Esta opcion le permitira ver los reportes generados",url:"#/reportes/ver/todos",icono:"unhide",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_ALMACENISTA,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]}],"/reportes/ver/todos"==n.$$url&&(o.tabla_reportes={},o.id_objeto_reportes=null,o.opciones_tabla_reportes=s.newOptions().withOption("ajax",{url:"/api/reportes/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){l(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_reportes=[c.newColumn(null).withTitle("Fecha").notSortable(),c.newColumn("tipo de orden").withTitle("Tipo de Repote").notSortable(),c.newColumn("reportes aceptados").withTitle("Reportes Aceptados").notSortable(),c.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<div class="ui icon button blue spopup" data-content="Ver Reportes" ng-click="modal_ver_reportes('+o.id+')"><i class="unhide icon"></i></div><div class="ui icon button green spopup"  data-content="Modificar Reportes" ng-click="modal_modificar_reportes('+o.id+')"><i class="edit icon"></i></div><div class="ui icon button red spopup"  data-content="Eliminar Reportes" ng-click="modal_eliminar_reportes('+o.id+')"><i class="remove icon"></i></div>'}).withOption("width","17%")])}]),simci.controller("UsuariosController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","$compile","DTOptionsBuilder","DTColumnBuilder","ToolsService",function(o,e,i,a,r,t,n,l,s,c,u){o.modulo={},o.DatosForm={},o.data_global_user=u.get_data_user_localstorage(),o.modulo.nombre="Usuarios",o.modulo.icono={tipo:"users",color:"blue"},o.modulo.opciones=[{nombre:"crear usuarios",descripcion:"Opcion para crear nuevos usuarios en el sistema",url:"#/usuarios/crear",icono:"user",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN]},{nombre:"ver usuarios",descripcion:"Opcion para Ver, Actualizar, Eliminar los usuarios registrados en el sistema",url:"#/usuarios/ver/todos",icono:"eye",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN,TIPO_USER_SUPERVISOR,TIPO_USER_PROFESOR]},{nombre:"crear tipos de usuario",descripcion:"Opcion para crear nuevos tipos de usuarios",url:"#/usuarios/crear/tipo-usuario",icono:"user",show_in:[TIPO_USER_ROOT,TIPO_USER_ADMIN]}],i.info(t),i.info(n),"/usuarios/crear"==n.$$url&&(o.mostrar_mensaje=!1,o.registrar_usuario=u.registrar_dinamico(o,e,a,{url:"/api/usuarios/crear-usuario-completo",formulario:{id:"formulario_crear_usuario",reglas:reglas_formulario_crear_usuario},exito:{titulo:"Usuario creado con exito",mensajes:["El usuario ha sido almacenado en la base de datos."]}})),"/usuarios/ver/todos"==n.$$url&&(o.tabla_usuarios={},o.id_objeto_actual=null,o.id_usuario_eliminar=null,o.opciones_tabla_usuarios=s.newOptions().withOption("ajax",{url:"/api/usuarios/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(e,i,r){l(angular.element(e).contents())(o),a(function(){$(".ui.spopup").popup()},!1,0)}),o.columnas_tabla_usuarios=[c.newColumn(null).withTitle("ID").renderWith(function(o,e,i){return u.printf('<a class="ui tiny blue tag label">{0}</a>',o.id)}).withOption("width","5%").notSortable(),c.newColumn("usuario").withTitle("Usuario").withOption("width","15%").notSortable(),c.newColumn("email").withTitle("Email").withOption("width","25%").notSortable(),c.newColumn("permisos").withTitle("Permisos").renderWith(function(o,e,i){var a="";return o=JSON.parse(o),o&&o.map(function(o){a+="["+o.nombre.toUpperCase()+"]"}),a}).notSortable(),c.newColumn("nombre_tipo_usuario").withTitle("Tipo de Usuario").withOption("width","15%").notSortable(),c.newColumn(null).withTitle("Acciones").renderWith(function(o,e,i){return'<a class="ui icon button blue spopup" data-content="Ver Usuario" ng-click="modal_ver_usuario('+o.id+')"><i class="unhide icon"></i></a><a class="ui icon button green spopup"  data-content="Modificar Usuario" ng-click="modal_modificar_usuario('+o.id+')"><i class="edit icon"></i></a><a class="ui icon button red spopup"  data-content="Eliminar Usuario" ng-click="modal_eliminar_usuario('+o.id+')"><i class="remove icon"></i></a>'}).withOption("width","15%").notSortable()],o.modal_ver_usuario=function(i){o.data_usuario={},u.mostrar_modal_dinamico(o,e,{url:"/api/usuarios/mostrar?type=usuario_full&id="+i,scope_data_save_success:"data_usuario",id_modal:"modal_ver_usuario",callbackSuccess:function(){o.data_usuario.permisos=o.data_usuario.permisos?JSON.parse(o.data_usuario.permisos):[]}})},o.modal_modificar_usuario=function(r){o.id_usuario_actual=r,e({method:"GET",url:"/api/usuarios/mostrar?type=usuario_full&id="+r,data:o.DatosForm}).then(function(e){o.data_usuario=e.data,e.data.permisos=e.data.permisos?JSON.parse(e.data.permisos):[],o.DatosForm={usuario:e.data.usuario,email:e.data.email,tipo_usuario:e.data.cod_tipo_usuario,permisos:e.data.permisos.map(function(o){return o.cod_permiso}),activo:e.data.activo},o.DatosForm.primer_nombre=e.data.primer_nombre||null,o.DatosForm.segundo_nombre=e.data.segundo_nombre||null,o.DatosForm.primer_apellido=e.data.primer_apellido||null,o.DatosForm.segundo_apellido=e.data.segundo_apellido||null,o.DatosForm.cedula=e.data.cedula||null,o.DatosForm.sexo=e.data.sexo_id?e.data.sexo_id.toString():null,o.DatosForm.fecha_nacimiento=e.data.fecha_nacimiento||null,a(function(){angular.element("#permisos").dropdown("set selected",o.DatosForm.permisos),angular.element("#tipo_usuario").dropdown("set selected",o.DatosForm.tipo_usuario),angular.element("#sexo").dropdown("set selected",o.DatosForm.sexo)},0,!1),angular.element("#modal_modificar_usuario").modal("show")},function(o){i.info(o)})},o.procesar_modificar=function(){var a=o.id_usuario_actual;u.loading_button("btn-modificar",!0),e({method:"POST",url:"/api/usuarios/actualizar-usuario-completo?id="+a,data:o.DatosForm}).then(function(e){e.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Usuario modificado con exito",icono:"checkmark",color:"green",mensajes:[]},u.loading_button("btn-modificar",!1),setTimeout(function(){u.reload_tabla(o,"tabla_usuarios",function(){})},500)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Error al modificar el usuario",icono:"remove",color:"red",mensajes:e.data.mensajes},u.loading_button("btn-modificar",!1)),i.info(o.DatosForm)},function(o){i.info(o),u.loading_button("btn-modificar",!1)})},o.modal_eliminar_usuario=function(i){alertify.confirm("Seguro que desea eliminar este usuario!",function(){e({method:"POST",url:"/api/usuarios/verificar?id="+i}).then(function(a){a.data.resultado?alertify.alert("No puede eliminar este usuario debido que mantiene relaciones con otras entidades. Verifique para proceder con la accion."):alertify.confirm("Confirme si desea eliminar",function(){e({method:"POST",url:"/api/usuarios/eliminar?id="+i}).then(function(e){e.data.resultado?setTimeout(function(){u.reload_tabla(o,"tabla_usuarios",function(o){})},500):alertify.error("Ha ocurrido un error al realizar la operacion")},function(o){alertify.error("Ha ocurrido un error al realizar la operacion")})}).set("title","¡Alerta!")},function(o){u.generar_alerta_status(o)})}).set("title","¡Alerta!")}),"/usuarios/crear/tipo-usuario"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_tipo_usuario=u.registrar_dinamico(o,e,a,{url:"/api/usuarios/registrar-tipo-usuario",formulario:{id:"formulario_crear_tipo_usuario",reglas:reglas_formulario_crear_tipo_usuario},exito:{titulo:"Tipo de usuario creado con exito",mensajes:["Tipo de usuario guardado en la base de datos."]}}))}]);