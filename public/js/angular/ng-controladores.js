simci.controller("CatalogoController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,r,a,e,i,t,n,s,l,u,c,m){o.modulo={},o.DatosForm={},o.data_global_user=c.get_data_user_localstorage(),o.modulo.nombre="Catalogo",o.modulo.icono={tipo:"book",color:"orange"},o.modulo.opciones=[{nombre:"registrar objeto",descripcion:"Esta opcion le permitira añadir nuevos objetos al catalogo",url:"#/catalogo/registrar-objeto",icono:"write",show_in:[TIPO_USER_ROOT]},{nombre:"ver catalogo",descripcion:"Esta opcion le permitira ver, modificar o eliminar los objetos del catalogos",url:"#/catalogo/ver/todos",icono:"eye"},{nombre:"registrar unidad",descripcion:"Esta opcion le permitira añadir nuevas unidades para objetos del catalogo",url:"#/catalogo/registrar-unidad",icono:"write"},{nombre:"registrar clase",descripcion:"Esta opcion le permitira añadir nuevas clases para objetos del objetos",url:"#/catalogo/registrar-clase",icono:"write"}],a.info(t),a.info(n),"/catalogo/registrar-objeto"==n.$$url&&(c.reload_template_cache(i,m),o.mostrar_mensaje=!1,o.mostrar_mensaje_modificacion=!1,o.registrar_objeto=c.registrar_dinamico(o,r,e,{url:"/api/catalogo/registrar-objeto",formulario:{id:"formulario_crear_objeto",reglas:reglas_formulario_crear_objeto},exito:{titulo:"Objeto creado con exito",mensajes:["El Objeto ha sido agregado al catalogo."]}})),"/catalogo/ver/todos"==n.$$url&&(o.tabla_objetos={},o.id_objeto_actual=null,o.opciones_tabla_objetos=s.newOptions().withOption("ajax",{url:"/api/catalogo/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(r,a,e){u(angular.element(r).contents())(o),angular.element($("td",r).eq(4).get(0)).css({width:"135px"})}),o.columnas_tabla_objetos=[l.newColumn("id").withTitle("ID").notSortable(),l.newColumn("nombre").withTitle("Nombre").notSortable(),l.newColumn(null).withTitle("Unidad").renderWith(function(o,r,a){return o.nombre_unidad+" ("+o.abreviatura_unidad+")"}).notSortable(),l.newColumn(null).withTitle("Especificaciones").renderWith(function(o,r,a){return c.cut_string(o.especificaciones,60)}).notSortable(),l.newColumn(null).withTitle("Acciones").renderWith(function(o,r,a){return'<div class="ui icon button blue pop" data-content="Ver Usuario" ng-click="modal_ver_objeto('+o.id+')"><i class="unhide icon"></i></div>\n                        <div class="ui icon button green pop"  data-content="Modificar Usuario" ng-click="modal_modificar_objeto('+o.id+')"><i class="edit icon"></i></div>  \n                        <div class="ui icon button red pop"  data-content="Eliminar Usuario" ng-click="modal_eliminar_objeto('+o.id+')"><i class="remove icon"></i></div>'})],o.modal_ver_objeto=function(e){o.data_objeto={},r({method:"GET",url:"/api/catalogo/mostrar?type=objeto&id="+e,data:o.DatosForm}).then(function(r){o.data_objeto=r.data,angular.element("#modal_ver_objeto").modal("show")},function(o){a.info(o)})},o.modal_modificar_objeto=function(e){o.mostrar_mensaje=!1,o.id_objeto_actual=e,r({method:"GET",url:"/api/catalogo/mostrar?type=objeto&id="+e}).then(function(r){o.DatosForm=r.data,o.DatosForm.cod_clase_objeto=o.DatosForm.cod_clase_objeto.toString(),o.DatosForm.cod_unidad=o.DatosForm.cod_unidad.toString(),setTimeout(function(){angular.element("#unidad").dropdown("set selected",o.DatosForm.cod_unidad),angular.element("#clase_objeto").dropdown("set selected",o.DatosForm.cod_clase_objeto),angular.element("#modal_modificar_objeto").modal("show")},300)},function(o){a.info(o)})},o.procesar_modificar=function(){var e=o.id_objeto_actual;c.loading_button("btn-modificar",!0),r({method:"POST",url:"/api/catalogo/actualizar-objeto?id="+e,data:o.DatosForm}).then(function(r){r.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Objeto modificado con exito",icono:"checkmark",color:"green",mensajes:[]},c.loading_button("btn-modificar",!1),setTimeout(function(){c.reload_tabla(o,"tabla_objetos",function(){})},500)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Error al modificar el objeto",icono:"remove",color:"red",mensajes:r.data.mensajes},c.loading_button("btn-modificar",!1)),a.info(o.DatosForm)},function(o){a.info(o),c.loading_button("btn-modificar",!1)})},o.modal_eliminar_objeto=function(r){o.id_objeto_actual=r,angular.element("#modal_eliminar_objeto").modal("show")},o.cerrar_modal_eliminar=function(){angular.element("#modal_eliminar_objeto").modal("hide")},o.procesar_eliminar=function(){var e=o.id_objeto_eliminar;r({method:"POST",url:"/api/catalogo/eliminar?id="+e}).then(function(r){r.data.resultado?(o.cerrar_modal_eliminar(),setTimeout(function(){c.reload_tabla(o,"tabla_objetos",function(){})},500)):a.info(r)},function(o){a.info(o)})}),"/catalogo/registrar-unidad"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_unidad=function(){var a=$("#formulario_crear_unidad"),i=a.form(reglas_formulario_crear_unidad).form("is valid");i&&(c.loading_button("btn-registrar",!0),r({method:"POST",url:"/api/catalogo/registrar-unidad",data:o.DatosForm}).then(function(r){r.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Unidad creada con exito",icono:"checkmark",color:"green",mensajes:["La unidad ha sido creada"]},e(function(){c.loading_button("btn-registrar",!1),a.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:r.data.mensajes}),c.loading_button("btn-registrar",!1)},function(o){console.log(o),c.loading_button("btn-registrar",!1)}))}),"/catalogo/registrar-clase"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_objeto=function(){var a=$("#formulario_crear_clase_objeto"),i=a.form(reglas_formulario_crear_clase_objeto).form("is valid");i&&(c.loading_button("btn-registrar",!0),r({method:"POST",url:"/api/catalogo/registrar-clase-objeto",data:o.DatosForm}).then(function(r){r.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Clase creada con exito",icono:"checkmark",color:"green",mensajes:["Nueva clase de objeto creada"]},e(function(){c.loading_button("btn-registrar",!1),a.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:r.data.mensajes}),c.loading_button("btn-registrar",!1)},function(o){console.log(o),c.loading_button("btn-registrar",!1)}))})}]),simci.controller("ConsultaController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,r,a,e,i,t,n,s,l,u,c,m){o.modulo={},o.DatosForm={},o.modulo.nombre="Consulta",o.modulo.icono={tipo:"search",color:"olive"},o.modulo.opciones=[{nombre:"consulta",descripcion:"Esta opcion le permitira observar la disponibilidad del inventario y realizar busquedas",url:"#/consulta/realizar-consultas",icono:"unhide"}]}]),simci.controller("DocumentosController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,r,a,e,i,t,n,s,l,u,c,m){o.modulo={},o.DatosForm={},o.modulo.nombre="Documentos",o.modulo.icono={tipo:"travel",color:"teal"},o.modulo.opciones=[{nombre:"crear documentos",descripcion:"Esta opcion le permitira enviar documentos",url:"#/documentos/enviar-documentos",icono:"write"},{nombre:"mostrar documentos",descripcion:"Esta opcion le permitira mostrar los documentos enviados y recibidos",url:"#/documentos/recibir/mostrar-todos",icono:"unhide"}]}]),simci.controller("InventarioController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","$compile","DTOptionsBuilder","DTColumnBuilder","ToolsService",function(o,r,a,e,i,t,n,s,l,u,c){o.modulo={},o.DatosForm={},o.modulo.nombre="Inventario",o.modulo.icono={tipo:"archive",color:"green"},o.modulo.opciones=[{nombre:"registrar elemento",descripcion:"Esta opcion le permitira registrar nuevos elementos en el inventario",url:"#/inventario/registrar-elemento",icono:"write"},{nombre:"entrada / salida",descripcion:"Esta opcion le permitira dar entrada o salida al los objetos del inventario",url:"#/inventario/ver/todos",icono:"compress"},{nombre:"ver inventario",descripcion:"Esta opcion le permitira ver los elementos en el inventario, a su vez tambien podra modificar o eliminar dichos objetos",url:"#/inventario/ver/todos",icono:"eye"},{nombre:"registrar almacen",descripcion:"Opcion para crear nuevos almacenes",url:"#/inventario/registrar-almacen",icono:"write"},{nombre:"sub dimension",descripcion:"Opcion para crear sub dimenciones",url:"#/inventario/registrar-estante",icono:"write"},{nombre:"crear agrupacion",descripcion:"Esta opcion le permitira crear las agrupaciones por las cuales se ordenaran los elementos",url:"#/",icono:"write"},{nombre:"crear subagrupacion",descripcion:"Opcion para crear alguna caracteristica por la cual tambien ordenar elementos",url:"#/",icono:"write"}],a.info(t),a.info(n),"/inventario/registrar-almacen"==n.$$url&&(o.mostrar_mensaje=!1,o.registrar_almacen=c.registrar_dinamico(o,r,e,{url:"/api/inventario/registrar-almacen",formulario:{id:"formulario_registrar_almacen",reglas:reglas_formulario_registrar_almacen},exito:{titulo:"Almacen creado con exito",mensajes:["El almacen ha sido registrado en la base de datos."]}})),"/inventario/registrar-estante"==n.$$url&&(o.mostrar_mensaje=!1,o.registrar_estante=c.registrar_dinamico(o,r,e,{url:"/api/inventario/registrar-estante",formulario:{id:"formulario_crear_estante",reglas:reglas_formulario_registrar_estante},exito:{titulo:"Estante creado con exito",mensajes:["El estante ha sido registrado en la base de datos."]}})),"/inventario/ver/todos"==n.$$url&&(o.tabla_elementos={},o.id_elemento_actual=null,o.opciones_tabla_elementos=l.newOptions().withOption("ajax",{url:"/api/inventario/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(r,a,e){s(angular.element(r).contents())(o)}),o.columnas_tabla_elementos=[u.newColumn("id").withTitle("ID").notSortable()])}]),simci.controller("LaboratorioController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,r,a,e,i,t,n,s,l,u,c,m){o.modulo={},o.DatosForm={},o.modulo.nombre="Laboratorio",o.modulo.icono={tipo:"lab",color:"purple"},o.modulo.opciones=[{nombre:"registrar laboratorio",descripcion:"Esta opcion le permitira añadir nuevos laboratorios",url:"#/laboratorio/crear-laboratorio",icono:"write"},{nombre:"mostrar laboratorio",descripcion:"Esta opcion le permitira ver los nuevos laboratorios",url:"#/laboratorio/ver/todos",icono:"unhide"},{nombre:"agregar stock",descripcion:"Esta opcion le permitira agregar nuevos stock al laboratorios",url:"#/laboratorio/registrar-stock",icono:"plus"},{nombre:"mostrar stock",descripcion:"Esta opcion le permitira ver los nuevos stock y moverlos a nuevos laboratorios",url:"#/laboratorio/mostrar-stock",icono:"eye"},{nombre:"mover stock",descripcion:"Esta opcion le permitira mover los stock del laboratorios y moverlos a nuevos laboratorios",url:"#/laboratorio/mover-stock",icono:"external"}],a.info(t),a.info(n),"/laboratorio/crear-laboratorio"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_laboratorio=function(){var a=$("#formulario_crear_laboratorio"),i=a.form(reglas_formulario_registrar_laboratorio).form("is valid");i&&(c.loading_button("btn-registrar",!0),r({method:"POST",url:"/api/laboratorio/registrar-laboratorio",data:o.DatosForm}).then(function(r){r.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Laboratoiro creado con exito",icono:"checkmark",color:"green",mensajes:["Nuevo Laboratorio creado"]},e(function(){c.loading_button("btn-registrar",!1),a.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:r.data.mensajes}),c.loading_button("btn-registrar",!1)},function(o){console.log(o),c.loading_button("btn-registrar",!1)}))})}]),simci.controller("OrdenesController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,r,a,e,i,t,n,s,l,u,c,m){o.modulo={},o.DatosForm={},o.modulo.nombre="Ordenes",o.modulo.icono={tipo:"edit",color:"yellow"},o.modulo.opciones=[{nombre:"generar ordenes",descripcion:"Esta opcion le permitira crear ordenes",url:"#/ordenes/crear-ordenes",icono:"write"},{nombre:"mostrar ordenes",descripcion:"Esta opcion le permitira ver las ordenes existentes",url:"#/ordenes/ver/todos",icono:"unhide"}]}]),simci.controller("ReporteController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile","ToolsService","$templateCache",function(o,r,a,e,i,t,n,s,l,u,c,m){o.modulo={},o.DatosForm={},o.modulo.nombre="Reporte",o.modulo.icono={tipo:"file text outline",color:"red"},o.modulo.opciones=[{nombre:"crear reporte",descripcion:"Esta opcion le permitira crear reportes",url:"#/reporte/crear-reporte",icono:"write"},{nombre:"mostrar reporte",descripcion:"Esta opcion le permitira ver los reportes existentes",url:"#/reporte/ver/todos",icono:"eye"}]}]),simci.controller("UsuariosController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","$compile","DTOptionsBuilder","DTColumnBuilder","ToolsService",function(o,r,a,e,i,t,n,s,l,u,c){o.modulo={},o.DatosForm={},o.modulo.nombre="Usuarios",o.modulo.icono={tipo:"users",color:"blue"},o.modulo.opciones=[{nombre:"crear usuarios",descripcion:"Opcion para crear nuevos usuarios en el sistema",url:"#/usuarios/crear",icono:"user"},{nombre:"ver usuarios",descripcion:"Opcion para Ver, Actualizar, Eliminar los usuarios registrados en el sistema",url:"#/usuarios/ver/todos",icono:"eye"},{nombre:"crear permisos",descripcion:"Opcion para crear nuevos permisos de usuarios para el sistema",url:"#/usuarios/crear/permiso",icono:"user"},{nombre:"crear tipos de usuario",descripcion:"Opcion para crear nuevos tipos de usuarios",url:"#/usuarios/crear/tipo-usuario",icono:"user"}],a.info(t),a.info(n),"/usuarios/crear"==n.$$url&&(o.mostrar_mensaje=!1,o.registrar_usuario=c.registrar_dinamico(o,r,e,{url:"/api/usuarios/crear-usuario-completo",formulario:{id:"formulario_crear_usuario",reglas:reglas_formulario_crear_usuario},exito:{titulo:"Usuario creado con exito",mensajes:["El usuario ha sido almacenado en la base de datos."]}})),"/usuarios/ver/todos"==n.$$url&&(o.tabla_usuarios={},o.id_objeto_actual=null,o.id_usuario_eliminar=null,o.opciones_tabla_usuarios=l.newOptions().withOption("ajax",{url:"/api/usuarios/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(r,a,e){s(angular.element(r).contents())(o),angular.element($("td",r).eq(5).get(0)).css({width:"135px"})}),o.columnas_tabla_usuarios=[u.newColumn("id").withTitle("ID").notSortable(),u.newColumn("usuario").withTitle("Usuario").notSortable(),u.newColumn("email").withTitle("Email").notSortable(),u.newColumn("data_permisos").withTitle("Permisos").renderWith(function(o,r,a){var e="";return o.map(function(o){e+="["+o.nombre.toUpperCase()+"]"}),e}).notSortable(),u.newColumn("data_tipo_usuario.descripcion").withTitle("Tipo de Usuario").notSortable(),u.newColumn(null).withTitle("Acciones").renderWith(function(o,r,a){return'<a class="ui icon button blue" data-content="Ver Usuario" ng-click="modal_ver_usuario('+o.id+')"><i class="unhide icon"></i></a>\n                      <a class="ui icon button green"  data-content="Modificar Usuario" ng-click="modal_modificar_usuario('+o.id+')"><i class="edit icon"></i></a>  \n                      <a class="ui icon button red "  data-content="Eliminar Usuario" ng-click="modal_eliminar_usuario('+o.id+')"><i class="remove icon"></i></a>'})],o.modal_ver_usuario=function(e){o.data_usuario={},r({method:"GET",url:"/api/usuarios/mostrar?type=usuario_full&id="+e}).then(function(r){a.info(r),o.data_usuario=r.data,angular.element("#modal_ver_usuario").modal("show")},function(o){a.info(o)})},o.modal_modificar_usuario=function(i){o.id_usuario_actual=i,r({method:"GET",url:"/api/usuarios/mostrar?type=usuario_full&id="+i,data:o.DatosForm}).then(function(r){o.data_usuario=r.data,o.DatosForm={usuario:r.data.usuario.usuario,email:r.data.usuario.email,tipo_usuario:r.data.usuario.cod_tipo_usuario,permisos:r.data.usuario.data_permisos.map(function(o){return o.codigo}),activo:r.data.usuario.activo},r.data.persona&&(o.DatosForm.primer_nombre=r.data.persona.primer_nombre||null,o.DatosForm.segundo_nombre=r.data.persona.segundo_nombre||null,o.DatosForm.primer_apellido=r.data.persona.primer_apellido||null,o.DatosForm.segundo_apellido=r.data.persona.segundo_apellido||null,o.DatosForm.cedula=r.data.persona.cedula||null,o.DatosForm.sexo=r.data.persona.sexo_id.toString()||null,o.DatosForm.fecha_nacimiento=r.data.persona.fecha_nacimiento||null),e(function(){angular.element("#permisos").dropdown("set selected",o.DatosForm.permisos),angular.element("#tipo_usuario").dropdown("set selected",o.DatosForm.tipo_usuario),angular.element("#sexo").dropdown("set selected",o.DatosForm.sexos)},0,!1),angular.element("#modal_modificar_usuario").modal("show")},function(o){a.info(o)})},o.procesar_modificar=function(){var e=o.id_usuario_actual;c.loading_button("btn-modificar",!0),r({method:"POST",url:"/api/usuarios/actualizar-usuario-completo?id="+e,data:o.DatosForm}).then(function(r){r.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Usuario modificado con exito",icono:"checkmark",color:"green",mensajes:[]},c.loading_button("btn-modificar",!1),setTimeout(function(){c.reload_tabla(o,"tabla_usuarios",function(){})},500)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Error al modificar el usuario",icono:"remove",color:"red",mensajes:r.data.mensajes},c.loading_button("btn-modificar",!1)),a.info(o.DatosForm)},function(o){a.info(o),c.loading_button("btn-modificar",!1)})},o.modal_eliminar_usuario=function(r){o.id_usuario_eliminar=r,angular.element("#modal_eliminar_usuario").modal("show")},o.cerrar_modal_eliminar=function(){angular.element("#modal_eliminar_usuario").modal("hide")},o.procesar_eliminar=function(){var e=o.id_usuario_eliminar;r({method:"POST",url:"/api/usuarios/eliminar?id="+e}).then(function(r){r.data.resultado?(o.cerrar_modal_eliminar(),setTimeout(function(){c.reload_tabla(o,"tabla_usuarios",function(o){})},500)):a.info(r)},function(o){a.info(o)})}),"/usuarios/crear/permiso"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_permiso=c.registrar_dinamico(o,r,e,{url:"/api/usuarios/registrar-permiso",formulario:{id:"formulario_crear_permiso",reglas:reglas_formulario_crear_permiso},exito:{titulo:"Permiso creado con exito",mensajes:["Permiso registrado en la base de datos."]}})),"/usuarios/crear/tipo-usuario"==n.$$url&&(o.mostrar_mensaje=!1,o.DatosForm={},o.registrar_tipo_usuario=c.registrar_dinamico(o,r,e,{url:"/api/usuarios/registrar-tipo-usuario",formulario:{id:"formulario_crear_tipo_usuario",reglas:reglas_formulario_crear_tipo_usuario},exito:{titulo:"Tipo de usuario creado con exito",mensajes:["Tipo de usuario guardado en la base de datos."]}}))}]);