simci.controller("CatalogoController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","DTOptionsBuilder","DTColumnBuilder","$compile",function(o,a,r,i,e,n,t,s,l,u){o.modulo={},o.DatosForm={},o.modulo.nombre="Catalogo",o.modulo.icono={tipo:"book",color:"orange"},o.modulo.opciones=[{nombre:"registrar objeto",descripcion:"Esta opcion le permitira a√±adir nuevos objetos al catalogo",url:"#/catalogo/registrar-objeto"},{nombre:"ver catalogo",descripcion:"Esta opcion le permitira ver los objetos del catalogo, a su vez tambien podra modificar o eliminar dichos objetos",url:"#/catalogo/ver/todos"}],r.info(n),r.info(t),"/catalogo/registrar-objeto"==t.$$url&&(o.mostrar_mensaje=!1,o.registrar_objeto=function(){var r=$("#formulario_crear_objeto"),e=r.form(reglas_formulario_crear_objeto).form("is valid");e&&($("#btn-registrar").addClass("loading").prop("disabled",!0),a({method:"POST",url:"/api/catalogo/registrar-objeto",data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Objeto creado con exito",icono:"checkmark",color:"green",mensajes:["El Objeto ha sido agregado al catalogo."]},i(function(){$("#btn-registrar").removeClass("loading").prop("disabled",!1),r.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar la informacion",icono:"remove",color:"red",mensajes:a.data.mensajes}),$("#btn-registrar").removeClass("loading").prop("disabled",!1)},function(o){console.log(o),$("#btn-registrar").removeClass("loading").prop("disabled",!1)}))}),"/catalogo/ver/todos"==t.$$url&&(o.opciones_tabla_objetos=s.newOptions().withOption("ajax",{url:"/api/catalogo/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(a,r,i){u(angular.element(a).contents())(o),angular.element($("td",a).eq(4).get(0)).css({width:"130px"})}),o.columnas_tabla_objetos=[l.newColumn("id").withTitle("ID").notSortable(),l.newColumn("nombre").withTitle("Nombre").notSortable(),l.newColumn(null).withTitle("Unidad").renderWith(function(o,a,r){return o.data_unidad.nombre+" ("+o.data_unidad.abreviatura+")"}).notSortable(),l.newColumn("especificaciones").withTitle("Especificaciones").notSortable(),l.newColumn(null).withTitle("Acciones").renderWith(function(o,a,r){return'<div class="ui icon button blue pop" data-content="Ver Usuario" ng-click="modal_ver_objeto('+o.id+')"><i class="unhide icon"></i></div>\n                        <div class="ui icon button green pop"  data-content="Modificar Usuario" ng-click="modal_modificar_objeto('+o.id+')"><i class="edit icon"></i></div>  \n                        <div class="ui icon button red pop"  data-content="Eliminar Usuario" ng-click="modal_eliminar_objeto('+o.id+')"><i class="remove icon"></i></div>'})],o.modal_ver_objeto=function(i){o.data_objeto={},a({method:"GET",url:"/api/catalogo/mostrar?type=objeto&id="+i,data:o.DatosForm}).then(function(a){o.data_objeto=a.data,angular.element("#modal_ver_objeto").modal("show")},function(o){r.info(o)})},o.modal_modificar_objeto=function(i){a({method:"GET",url:"/api/catalogo/mostrar?type=objeto&id="+i,data:o.DatosForm}).then(function(a){o.DatosForm=a.data,r.info(o.DatosForm),angular.element("#modal_modificar_objeto").modal("show")},function(o){r.info(o)})},o.modal_eliminar_usuario=function(o){angular.element("#modal_eliminar_usuario").modal("show")})}]),simci.controller("InventarioController",["$scope","$http","$log","$route","$routeParams","$location",function(o,a,r,i,e,n){o.modulo={},o.modulo.nombre="Inventario",o.modulo.icono={tipo:"archive",color:"green"},o.modulo.opciones=[{nombre:"registrar elemento",descripcion:"Esta opcion le permitira crear nuevos elementos en el inventario",url:"#/"},{nombre:"ver inventario",descripcion:"Esta opcion le permitira ver los elementos en el inventario, a su vez tambien podra modificar o eliminar dichos objetos",url:"#/"},{nombre:"crear almacen",descripcion:"Opcion para crear nuevos almacenes",url:"#/"},{nombre:"crear estante",descripcion:"Opcion para crear nuevos estantes",url:"#/"},{nombre:"crear agrupacion",descripcion:"Esta opcion le permitira crear las agrupaciones por las cuales se ordenaran los elementos",url:"#/"},{nombre:"crear subagrupacion",descripcion:"Opcion para crear alguna caracteristica por la cual tambien ordenar elementos",url:"#/"}],r.info(e),r.info(n)}]),simci.controller("UsuariosController",["$scope","$http","$log","$timeout","$route","$routeParams","$location","$compile","DTOptionsBuilder","DTColumnBuilder",function(o,a,r,i,e,n,t,s,l,u){o.modulo={},o.DatosForm={},o.modulo.nombre="Usuarios",o.modulo.icono={tipo:"users",color:"blue"},o.modulo.opciones=[{nombre:"crear usuarios",descripcion:"Opcion para crear nuevos usuarios en el sistema",url:"#/usuarios/crear"},{nombre:"ver usuarios",descripcion:"Opcion para Ver, Actualizar, Eliminar los usuarios registrados en el sistema",url:"#/usuarios/ver/todos"},{nombre:"crear permisos",descripcion:"Opcion se podran crear nuevos permisos de usuarios para el sistema",url:"#/usuarios/crear/permiso"},{nombre:"ver permisos",descripcion:"Opcion para Ver, Actualizar, Eliminar los permisos registrados en el sistema",url:"#/usuarios/modificar"},{nombre:"crear tipos de usuario",descripcion:"Opcion para Ver, Actualizar, Eliminar los permisos registrados en el sistema",url:"#/usuarios/crear/tipo-usuario"}],r.info(n),r.info(t),"/usuarios/crear"==t.$$url&&(o.mostrar_mensaje=!1,o.registrar_usuario=function(){var r=$("#formulario_crear_usuario"),e=r.form(reglas_formulario_crear_usuario).form("is valid");e&&($("#btn-registrar").addClass("loading").prop("disabled",!0),a({method:"POST",url:"/api/usuarios/crear-usuario-completo",data:o.DatosForm}).then(function(a){a.data.resultado?(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Usuario creado con exito",icono:"checkmark",color:"green",mensajes:["El usuario ha sido almacenado en la base de datos."]},i(function(){$("#btn-registrar").removeClass("loading").prop("disabled",!1),r.form("clear")},0,!1)):(o.mostrar_mensaje=!0,o.mensaje_validacion={titulo:"Hubo un error al guardar el formulario",icono:"remove",color:"red",mensajes:a.data.mensajes}),$("#btn-registrar").removeClass("loading").prop("disabled",!1)},function(o){console.log(o),$("#btn-registrar").removeClass("loading").prop("disabled",!1)}))}),"/usuarios/ver/todos"==t.$$url&&(o.tabla_usuarios={},o.id_usuario_eliminar=null,o.opciones_tabla_usuarios=l.newOptions().withOption("ajax",{url:"/api/usuarios/mostrar?type=paginacion",type:"GET"}).withDataProp("data").withPaginationType("full_numbers").withOption("processing",!0).withOption("serverSide",!0).withOption("createdRow",function(a,r,i){s(angular.element(a).contents())(o),angular.element($("td",a).eq(5).get(0)).css({width:"135px"})}),o.columnas_tabla_usuarios=[u.newColumn("id").withTitle("ID").notSortable(),u.newColumn("usuario").withTitle("Usuario").notSortable(),u.newColumn("email").withTitle("Email").notSortable(),u.newColumn("data_permisos").withTitle("Permisos").renderWith(function(o,a,r){var i="";return o.map(function(o){i+="["+o.nombre.toUpperCase()+"]"}),i}).notSortable(),u.newColumn("data_tipo_usuario.descripcion").withTitle("Tipo de Usuario").notSortable(),u.newColumn(null).withTitle("Acciones").renderWith(function(o,a,r){return'<a class="ui icon button blue" data-content="Ver Usuario" ng-click="modal_ver_usuario('+o.id+')"><i class="unhide icon"></i></a>\n                      <a class="ui icon button green"  data-content="Modificar Usuario" ng-click="modal_modificar_usuario('+o.id+')"><i class="edit icon"></i></a>  \n                      <a class="ui icon button red "  data-content="Eliminar Usuario" ng-click="modal_eliminar_usuario('+o.id+')"><i class="remove icon"></i></a>'})],o.modal_ver_usuario=function(i){o.data_usuario={},a({method:"GET",url:"/api/usuarios/mostrar?type=usuario_full&id="+i,data:o.DatosForm}).then(function(a){r.info(a),o.data_usuario=a.data,angular.element("#modal_ver_usuario").modal("show")},function(o){r.info(o)})},o.modal_modificar_usuario=function(i){a({method:"GET",url:"/api/usuarios/mostrar?type=usuario_full&id="+i,data:o.DatosForm}).then(function(a){r.info(a),o.data_usuario=a.data,angular.element("#modal_modificar_usuario").modal("show")},function(o){r.info(o)})},o.modal_eliminar_usuario=function(a){o.id_usuario_eliminar=a,angular.element("#modal_eliminar_usuario").modal("show")},o.cerrar_modal_eliminar=function(){angular.element("#modal_eliminar_usuario").modal("hide")},o.procesar_eliminar=function(){var i=o.id_usuario_eliminar;a({method:"POST",url:"/api/usuarios/eliminar?id="+i}).then(function(a){a.data.resultado?(o.cerrar_modal_eliminar(),setTimeout(function(){o.tabla_usuarios.reloadData(function(o){},!1)},500)):r.info(a)},function(o){r.info(o)})})}]);